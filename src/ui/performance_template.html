<!DOCTYPE html>
<html xml:lang="es" lang="es">

<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="true" name="HandheldFriendly">
    <meta content="width" name="MobileOptimized">
    <meta content="width=device-width" name="viewport">
    <meta name="Description" content="OpenAds Local Environment Tester Appnexus">
    <meta name="theme-color" content="#9CCCEC">
    <meta content="telephone=no" name="format-detection">
    <title>OpenAds Local Environment Tester</title>
    <link rel="stylesheet" href="css/normalize.css"/>
    <link rel="stylesheet" href="css/demo.css?20"/>
    <link rel="manifest" href="css/manifest.json">
    <noscript>
        <p>Habilita el Codigo Javascript para el navegador</p>
    </noscript>
</head>
<body div id="js-scrollspy">
<noscript>
    <p>Habilita el Codigo Javascript para el navegador</p>
</noscript>
<header class="head">
    <div class="alpha"></div>
    <h1>OpenAds</h1>
    <h2>Demo</h2>
</header>
<main class="js-scrollspy-content main container">
    <div class="canvas">
        <section id="one">
            <h3>Initialize</h3>
            <pre><code>import OpenAds from '../openads/infrastructure/bootstrap/index'

    const openAds = OpenAds.init({config: {
      Sources: {
        AppNexus: {
          Member: 3397
        }
      }
    }})
    }</code></pre>
        </section>
        <section id="two">
            <h3>Create Positions</h3>
            <pre><code>const positionOne = openAds.addPosition({
  id: 'ad1',
  name: 'ad number one',
  source: 'AppNexus',
  placement: 'es-cn-wph-ocasion-list-x_65',
  segmentation: {
    'es-sch-ads_name_page': 'cochesnet/ocasion/listado',
    'es-sch-event_name': 'list',
    'aa-sch-country_code': 'es',
    'aa-sch-supply_type': 'wph',
    'es-sch-section': 'ocasion',
    'aa-sch-page_type': 'list',
    'es-sch-adformat': 'x65'
  },
  sizes: [[300, 250], [320, 250]]
})

const positionTwo = openAds.addPosition({
  id: 'ad2',
  name: 'ad number two',
  source: 'AppNexus',
  placement: 'es-cn-wde-ocasion-list-top_2',
  segmentation: {
    'es-sch-ads_name_page': 'cochesnet/ocasion/listado',
    'es-sch-event_name': 'list',
    'aa-sch-country_code': 'es',
    'aa-sch-supply_type': 'wde',
    'es-sch-section': 'ocasion',
    'aa-sch-page_type': 'list',
    'es-sch-adformat': 'top2'
  },
  sizes: [[728, 90], [1, 1], [728, 161]]
})
  </code></pre>
        </section>
        <section id="three">
            <h3>Display Positions</h3>
            <pre><code>
  positionOne.then(position => openAds.displayPosition({id: position.id}))
  positionTwo.then(position => openAds.displayPosition({id: position.id}))
                    </code></pre>

            <div id="ad1"></div>
            <div id="ad2"></div>

        </section>
        <section id="four">
            <h3>Refresh Positions</h3>
            <pre><code>
openAds.addPosition({
    id: 'ad1_with_error',
    name: 'ad_error',
    source: 'AppNexus',
    placement: 'placement_not_found',
    segmentation: {
    'es-sch-ads_name_page': 'segmentation/not/found'
    },
    sizes: [[300, 250], [320, 250]]
})
.then(position => openAds.displayPosition({id: position.id}))
.catch(error =>
    openAds.refreshPosition({
    id: error.position.id,
    position: {
        name: 'new name',
        placement: 'new-placement-to-update',
        segmentation: {
        'es-sch-ads_name_page': 'new/segmentation/to/page',
        }
    }
})
.then(position => openAds.displayPosition({id: position.id}))
)
                </code></pre>
            <p>This Position initially were not available so after handle the error was refreshed with new segmentation</p>
            <div id="ad_refresh"></div>
            <pre><code>
openAds.addPosition({
    id: 'ad3',
    name: 'ad number two',
    source: 'AppNexus',
    placement: 'es-cn-wde-ocasion-list-top_2',
    segmentation: {
    'es-sch-ads_name_page': 'cochesnet/ocasion/listado',
    'es-sch-event_name': 'list',
    'aa-sch-country_code': 'es',
    'aa-sch-supply_type': 'wde',
    'es-sch-section': 'ocasion',
    'aa-sch-page_type': 'list',
    'es-sch-adformat': 'top2'
    },
    sizes: [[728, 90], [1, 1], [728, 161]]
})
.then(position => openAds.displayPosition({id: position.id}))

setInterval(() => openAds.refreshPosition({id: 'ad3'}), 5000)
                </code></pre>
            <p>This Position is refreshed every five seconds</p>
            <div id="ad3"></div>
        </section>

    </div>
</main>
<footer class="foot">
    <div class="alpha"></div>
    <div class="container footer">
        <ul class="footer-webs">
            <li>
                <a href="https://www.schibsted.es/" target="_blank" title="Schibsted Spain"rel="noopener">
                    <img class="schibsted-logo" src="https://static.milanuncios.com/20181009113202/imagenes/home/schibsted-spain-logo.jpg" alt="Shibsted Logo">
                </a>
            </li>
            <li><a href="https://www.fotocasa.es/" target="_blank" title="Fotocasa"rel="noopener">fotocasa.es</a></li>
            <li><a href="https://www.inmogeo.com/" target="_blank" title="Inmogeo"rel="noopener">inmogeo.com</a></li>
            <li><a href="https://www.vibbo.com/" target="_blank" title="Vibbo"rel="noopener">vibbo.com</a></li>
            <li><a href="https://www.infojobs.net/" target="_blank" title="Infojobs"rel="noopener">Infojobs.net</a></li>
            <li><a href="https://www.coches.net/" target="_blank" title="Coches"rel="noopener">coches.net</a></li>
            <li><a href="https://www.milanuncios.com/" target="_blank" title="Milanuncios"rel="noopener">milanuncios.com</a></li>
            <li><a href="https://www.scm-re.com/" target="_blank"  title="Inmobiliaria en Europa"rel="noopener">inmobiliaria en Europa</a></li>
        </ul>
        <ul>
            <li>Â© 2018 Schibsted Classified Media Spain S.L.</li>
        </ul>
    </div>
</footer>
<script>
  if ('serviceWorker' in navigator) {
    console.log("Will service worker register?");
    navigator.serviceWorker.register('service-worker.js').then(function(reg){
      console.log("Yes it did.");
    }).catch(function(err) {
      console.log("No it didn't. This happened: ", err)
    });
  } else {
    console.log("No acepta ServiceWorkerservice-worker.js")
  }
</script>
<noscript>
    <p>Habilita el Codigo Javascript para el navegador</p>
</noscript>
</body>
</html>
